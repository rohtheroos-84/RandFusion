# RandFusion -- Final Evaluation Report

## 1. Overview

RandFusion is an ML-based framework that fuses classical statistical
randomness tests into a single verdict using a stacking ensemble.

- **Test set size:** 150 samples (75 strong, 75 weak)
- **Number of features:** 32 (NIST tests + entropy + compression + autocorrelation)
- **Models evaluated:** logistic_regression, random_forest, xgboost, stacking_ensemble

## 2. Test Set Results

| Model | Accuracy | Precision | Recall | F1 | ROC-AUC |
|-------|----------|-----------|--------|-----|---------|
| logistic_regression | 0.7933 | 0.7157 | 0.9733 | 0.8249 | 0.7867 |
| random_forest | 0.8067 | 0.7212 | 1.0000 | 0.8380 | 0.7959 |
| xgboost | 0.7533 | 0.7111 | 0.8533 | 0.7758 | 0.7771 |
| stacking_ensemble | 0.7933 | 0.7200 | 0.9600 | 0.8229 | 0.7892 |

### Classification Report (stacking_ensemble)

```
              precision    recall  f1-score   support

    Weak (0)       0.94      0.63      0.75        75
  Strong (1)       0.72      0.96      0.82        75

    accuracy                           0.79       150
   macro avg       0.83      0.79      0.79       150
weighted avg       0.83      0.79      0.79       150

```

## 3. Per-Generator Accuracy

| Generator | Type | Samples | Correct | Accuracy |
|-----------|------|---------|---------|----------|
| xor_collapse_8 | WEAK | 11 | 0 | 0.000 |
| xor_collapse_4 | WEAK | 5 | 0 | 0.000 |
| predictable_seed | WEAK | 13 | 1 | 0.077 |
| secrets_csprng | STRONG | 36 | 33 | 0.917 |
| os_urandom | STRONG | 39 | 39 | 1.000 |
| lcg_small_state | WEAK | 9 | 9 | 1.000 |
| biased_055 | WEAK | 10 | 10 | 1.000 |
| biased_070 | WEAK | 9 | 9 | 1.000 |
| repeating_seed_32 | WEAK | 7 | 7 | 1.000 |
| repeating_seed_16 | WEAK | 11 | 11 | 1.000 |

## 4. Stress Test Results

| Test Case | Predicted | Confidence | Notes |
|-----------|-----------|------------|-------|
| mersenne_twister | STRONG | 0.760 | Mersenne Twister is NOT cryptographically secure but passes many statistical tests. |
| constant_bytes | WEAK | 0.900 | Constant output has zero entropy. Model should classify as WEAK. |
| strong_64bit | WEAK | 0.563 | CSPRNG tokens at 64 bits (trained on 128-bit tokens). |
| strong_256bit | WEAK | 0.605 | CSPRNG tokens at 256 bits (trained on 128-bit tokens). |
| small_batch_10 | WEAK | 0.563 | Strong CSPRNG with only 10 tokens (trained on 1000-token batches). |
| small_batch_50 | WEAK | 0.600 | Strong CSPRNG with only 50 tokens (trained on 1000-token batches). |

## 5. Calibration Assessment

See `calibration_curves.png` for the reliability diagram.
A perfectly calibrated model would follow the diagonal: if it predicts
80% probability of STRONG, then 80% of such samples truly are STRONG.

## 6. Plots Generated

| Plot | File |
|------|------|
| Confusion Matrices | `confusion_matrices.png` |
| ROC Curves | `roc_curves.png` |
| Precision-Recall Curves | `precision_recall_curves.png` |
| Calibration Curves | `calibration_curves.png` |

## 7. Findings & Limitations

### Strengths
- The ML ensemble successfully fuses multiple statistical signals into a
  single verdict, outperforming naive baselines on AUC.
- Random Forest achieves the highest individual F1 score on the test set.
- SHAP explanations provide transparent, feature-level justifications
  for every decision.

### Limitations
- **Training data scope:** The model was trained on 8 specific weak generators
  and 2 strong generators. Novel weakness patterns may not be detected.
- **Token length sensitivity:** The model was trained on 128-bit tokens.
  Performance on other lengths varies (see stress tests).
- **Batch size dependency:** Very small batches produce less reliable verdicts
  due to insufficient statistical power in the underlying tests.
- **Not a certification tool:** A STRONG classification indicates statistical
  consistency with true randomness, not a cryptographic guarantee.

### Future Work
- Expand generator diversity (Mersenne Twister variants, real-world tokens)
- Add cross-validation study on generalization to unseen generators
- Build CLI tool for end-user evaluation
- Experiment with neural network classifiers on raw bitstreams

---
*Report generated by RandFusion evaluation pipeline.*
